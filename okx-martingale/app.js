const a0_0xf0a037=a0_0x397f;(function(_0x188f53,_0x8e3876){const _0x3bf553=a0_0x397f,_0x210204=_0x188f53();while(!![]){try{const _0x50667c=parseInt(_0x3bf553(0x1d0))/0x1*(-parseInt(_0x3bf553(0x1a1))/0x2)+-parseInt(_0x3bf553(0x1a7))/0x3+-parseInt(_0x3bf553(0x1d8))/0x4+-parseInt(_0x3bf553(0x1da))/0x5+-parseInt(_0x3bf553(0x1d2))/0x6+-parseInt(_0x3bf553(0x1ba))/0x7*(parseInt(_0x3bf553(0x1b8))/0x8)+-parseInt(_0x3bf553(0x1bf))/0x9*(-parseInt(_0x3bf553(0x1f1))/0xa);if(_0x50667c===_0x8e3876)break;else _0x210204['push'](_0x210204['shift']());}catch(_0x45ed4e){_0x210204['push'](_0x210204['shift']());}}}(a0_0x3a5a,0xc571d));function a0_0x397f(_0x58275e,_0x1c154a){const _0x3a5a63=a0_0x3a5a();return a0_0x397f=function(_0x397f06,_0x205c8c){_0x397f06=_0x397f06-0x19f;let _0x1b3eda=_0x3a5a63[_0x397f06];return _0x1b3eda;},a0_0x397f(_0x58275e,_0x1c154a);}let apiUrl=a0_0xf0a037(0x1aa),queryBtn=document[a0_0xf0a037(0x1ea)](a0_0xf0a037(0x202)),downloadKlineBtn=document[a0_0xf0a037(0x1ea)](a0_0xf0a037(0x1f2)),closeKlineBtn=document[a0_0xf0a037(0x1ea)](a0_0xf0a037(0x1c0)),symbolSelect=document[a0_0xf0a037(0x1ea)](a0_0xf0a037(0x204)),intervalSelect=document[a0_0xf0a037(0x1ea)](a0_0xf0a037(0x1e7)),startTimeInput=document[a0_0xf0a037(0x1ea)](a0_0xf0a037(0x1ff)),endTimeInput=document[a0_0xf0a037(0x1ea)](a0_0xf0a037(0x1c4)),klineDialog=document[a0_0xf0a037(0x1ea)](a0_0xf0a037(0x20a)),klineTable=document[a0_0xf0a037(0x1ea)](a0_0xf0a037(0x1b4)),positionSideSelect=document[a0_0xf0a037(0x1ea)](a0_0xf0a037(0x1cb)),computeBtn=document[a0_0xf0a037(0x1ea)](a0_0xf0a037(0x1c2)),closeMartingaleBtn=document[a0_0xf0a037(0x1ea)]('closeMartingaleBtn'),computeMartingaleDialog=document[a0_0xf0a037(0x1ea)](a0_0xf0a037(0x1e5)),symbol=symbolSelect['value'],interval=intervalSelect['value'],startTime=new Date(startTimeInput[a0_0xf0a037(0x1a8)])[a0_0xf0a037(0x1d9)](),endTime=new Date(endTimeInput[a0_0xf0a037(0x1a8)])[a0_0xf0a037(0x1d9)](),positionSide=positionSideSelect[a0_0xf0a037(0x1a8)],klineData=[],currentStartTime=startTime,totalResults=0x0;symbolSelect[a0_0xf0a037(0x1b6)]=function(){const _0x56283b=a0_0xf0a037;symbol=symbolSelect[_0x56283b(0x1a8)];},intervalSelect['onchange']=function(){const _0x2a3a64=a0_0xf0a037;interval=intervalSelect[_0x2a3a64(0x1a8)];},startTimeInput[a0_0xf0a037(0x1b6)]=function(){const _0x2e62ff=a0_0xf0a037;startTime=new Date(startTimeInput[_0x2e62ff(0x1a8)])[_0x2e62ff(0x1d9)]();},endTimeInput[a0_0xf0a037(0x1b6)]=function(){const _0x6167b8=a0_0xf0a037;endTime=new Date(endTimeInput[_0x6167b8(0x1a8)])[_0x6167b8(0x1d9)]();},positionSideSelect['onchange']=function(){positionSide=positionSideSelect['value'];},queryBtn['onclick']=function(){const _0x14d3f6=a0_0xf0a037;queryBtn[_0x14d3f6(0x1f6)]=!![],queryBtn[_0x14d3f6(0x1ee)]['backgroundColor']=_0x14d3f6(0x1cd),query();},computeBtn['onclick']=function(){compute();};function query(){const _0x7d3e40=a0_0xf0a037;klineData=[],currentStartTime=startTime,totalResults=0x0,klineTable[_0x7d3e40(0x1d3)]='',queryWithLimit(currentStartTime);}function queryWithLimit(_0x43c2f5){const _0xadf2f=a0_0xf0a037;let _0x423ffc=_0xadf2f(0x1ca)+symbol+_0xadf2f(0x1dc)+_0xadf2f(0x1d6)+interval+_0xadf2f(0x1a6)+_0x43c2f5+'&endTime='+endTime+'&limit=1000';fetch(apiUrl+_0x423ffc)[_0xadf2f(0x1ab)](function(_0x5da4db){const _0x1c14bd=_0xadf2f;return _0x5da4db[_0x1c14bd(0x1b2)]();})[_0xadf2f(0x1ab)](function(_0x79708b){const _0xd5f341=_0xadf2f;totalResults+=_0x79708b[_0xd5f341(0x1fe)],currentStartTime=_0x79708b[_0x79708b['length']-0x1][0x0]+0x1,klineData=klineData['concat'](_0x79708b),localStorage[_0xd5f341(0x1cc)](_0xd5f341(0x1f8),JSON[_0xd5f341(0x1b7)](klineData));if(_0x79708b[_0xd5f341(0x1fe)]<0x3e8){showKlineTable(0x1),klineDialog[_0xd5f341(0x1ee)]['display']=_0xd5f341(0x1fb);return;}new Promise(_0x495347=>{setTimeout(_0x495347,0x3e8);})[_0xd5f341(0x1ab)](()=>{queryWithLimit(currentStartTime);});});}function showKlineTable(_0x3b144f){const _0x4ba4f3=a0_0xf0a037;klineTable[_0x4ba4f3(0x1d3)]='';let _0x246599=0xa,_0x4149d9=(_0x3b144f-0x1)*_0x246599,_0x122fef=_0x4149d9+_0x246599,_0x249ea1=klineData[_0x4ba4f3(0x1fc)](_0x4149d9,_0x122fef),_0x187c86=document[_0x4ba4f3(0x1fd)](_0x4ba4f3(0x1c5));_0x187c86['innerHTML']='<tr><th>Time</th><th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th><th>Close\x20Time</th><th>Quote\x20Asset\x20Volume</th><th>Number\x20of\x20Trades</th><th>Taker\x20Buy\x20Base\x20Asset\x20Volume</th><th>Taker\x20Buy\x20Quote\x20Asset\x20Volume</th><th>Ignore</th></tr>',klineTable[_0x4ba4f3(0x1bc)](_0x187c86);let _0x4198e7=document[_0x4ba4f3(0x1fd)](_0x4ba4f3(0x1a5));console[_0x4ba4f3(0x1e3)](_0x249ea1),_0x249ea1[_0x4ba4f3(0x1e0)](function(_0x24a454){const _0x12a87d=_0x4ba4f3;let _0x27f30a=document[_0x12a87d(0x1fd)]('tr');_0x27f30a[_0x12a87d(0x1d3)]=_0x12a87d(0x1e1)+new Date(_0x24a454[0x0])[_0x12a87d(0x1eb)]()+_0x12a87d(0x1ed)+_0x24a454[0x1]+_0x12a87d(0x1ed)+_0x24a454[0x2]+_0x12a87d(0x1ed)+_0x24a454[0x3]+_0x12a87d(0x1ed)+_0x24a454[0x4]+_0x12a87d(0x1ed)+_0x24a454[0x5]+_0x12a87d(0x1ed)+new Date(_0x24a454[0x6])[_0x12a87d(0x1eb)]()+_0x12a87d(0x1ed)+_0x24a454[0x7]+_0x12a87d(0x1ed)+_0x24a454[0x8]+_0x12a87d(0x1ed)+_0x24a454[0x9]+_0x12a87d(0x1ed)+_0x24a454[0xa]+_0x12a87d(0x1ed)+_0x24a454[0xb]+_0x12a87d(0x1df),_0x4198e7[_0x12a87d(0x1bc)](_0x27f30a);}),klineTable[_0x4ba4f3(0x1bc)](_0x4198e7);let _0x3c3ce8=document[_0x4ba4f3(0x1fd)](_0x4ba4f3(0x1c8));_0x3c3ce8[_0x4ba4f3(0x1ce)]=_0x4ba4f3(0x1f4);let _0x44f131=Math[_0x4ba4f3(0x1e9)](klineData[_0x4ba4f3(0x1fe)]/_0x246599);for(let _0x516ed7=0x1;_0x516ed7<=_0x44f131;_0x516ed7++){let _0x498e10=document[_0x4ba4f3(0x1fd)]('a');_0x498e10['href']='#',_0x498e10['className']=_0x4ba4f3(0x206),_0x498e10['innerText']=_0x516ed7+'',_0x498e10[_0x4ba4f3(0x1b1)](_0x4ba4f3(0x203),()=>showKlineTable(_0x516ed7)),_0x516ed7===_0x3b144f&&_0x498e10[_0x4ba4f3(0x208)][_0x4ba4f3(0x1bd)]('current'),_0x3c3ce8['appendChild'](_0x498e10);}klineTable[_0x4ba4f3(0x1bc)](_0x3c3ce8);}function a0_0x3a5a(){const _0x3af6de=['computeMartingaleDialog','body','intervalSelect','toISOString','ceil','getElementById','toLocaleString','priceMultiplier','</td><td>','style','baseAmount','category','2730gEYKSA','downloadKlineBtn','close','page-links','#008F28','disabled','\x20仓位:\x20','klineData','\x20收益率：','high','block','slice','createElement','length','startTime','firstAmount','additionMultiplier','queryBtn','click','symbolSelect','maxAdditionCount','page-link','innerText','classList','开仓\x20时间:\x20','klineDialog','总资金','display','2thcILM','removeChild','\x20价格:\x20','\x20仓位价格:\x20','tbody','&startTime=','4193634Uexkjb','value','\x20加仓次数:\x20','https://api.binance.com/api/v3/klines','then','min','push','download','open','stopProfit','addEventListener','json','init','klineTable','onclick','onchange','stringify','29432EhJeXf','low','133oPXOaa','\x20收益：','appendChild','add','#00da3c','179721KnYetn','closeKlineBtn','triggerDrop','computeBtn','开始执行马丁格尔策略','endTime','thead','long','加仓\x20时间:\x20','div','date','?symbol=','positionSideSelect','setItem','gray','className','right','306788ceinUv','data:application/json;charset=utf-8,','6402054QGVMPh','innerHTML','平仓\x20时间:\x20','pow','&interval=','\x20资金:\x20','6061252OUfZtH','getTime','1429575tZgmWB','leverage','USDT','none','abs','</td>','forEach','<td>','.json','log','\x20总计投入保证金：'];a0_0x3a5a=function(){return _0x3af6de;};return a0_0x3a5a();}closeKlineBtn[a0_0xf0a037(0x1b5)]=function(){const _0x6682f8=a0_0xf0a037;klineDialog[_0x6682f8(0x1ee)]['display']=_0x6682f8(0x1dd);},closeMartingaleBtn[a0_0xf0a037(0x1b5)]=function(){const _0x5f4b89=a0_0xf0a037;computeMartingaleDialog[_0x5f4b89(0x1ee)][_0x5f4b89(0x1a0)]=_0x5f4b89(0x1dd);},downloadKlineBtn[a0_0xf0a037(0x1b5)]=function(){const _0x261762=a0_0xf0a037;let _0x3338a7=symbol+'_'+interval+_0x261762(0x1e2),_0x6806ee=klineData['map'](function(_0x3ab715){return{'timestamp':_0x3ab715[0x0],'open':_0x3ab715[0x1],'high':_0x3ab715[0x2],'low':_0x3ab715[0x3],'close':_0x3ab715[0x4],'volume':_0x3ab715[0x5],'closeTime':_0x3ab715[0x6],'quoteAssetVolume':_0x3ab715[0x7],'numberOfTrades':_0x3ab715[0x8],'takerBuyBaseAssetVolume':_0x3ab715[0x9],'takerBuyQuoteAssetVolume':_0x3ab715[0xa],'ignore':_0x3ab715[0xb]};}),_0x5857b4=document[_0x261762(0x1fd)]('a');_0x5857b4[_0x261762(0x1ae)]=_0x3338a7,_0x5857b4['href']=_0x261762(0x1d1)+encodeURIComponent(JSON[_0x261762(0x1b7)](_0x6806ee,null,0x2)),_0x5857b4[_0x261762(0x1ee)][_0x261762(0x1a0)]=_0x261762(0x1dd),document[_0x261762(0x1e6)][_0x261762(0x1bc)](_0x5857b4),_0x5857b4[_0x261762(0x203)](),document[_0x261762(0x1e6)][_0x261762(0x1a2)](_0x5857b4);};function compute(){const _0x411fb6=a0_0xf0a037;console[_0x411fb6(0x1e3)](_0x411fb6(0x1c3));let _0x46e064=document[_0x411fb6(0x1ea)]('computeMartingaleDialog');_0x46e064[_0x411fb6(0x1ee)][_0x411fb6(0x1a0)]=_0x411fb6(0x1fb);let _0x119328=parseFloat(document[_0x411fb6(0x1ea)](_0x411fb6(0x1db))['value']),_0x4cfad6=parseFloat(document['getElementById'](_0x411fb6(0x200))[_0x411fb6(0x1a8)]),_0x5c87e2=parseFloat(document[_0x411fb6(0x1ea)](_0x411fb6(0x1ef))[_0x411fb6(0x1a8)]),_0x288a8a=parseFloat(document['getElementById'](_0x411fb6(0x1c1))['value']),_0x4ad98f=parseFloat(document[_0x411fb6(0x1ea)](_0x411fb6(0x1b0))['value']),_0x10645f=parseInt(document[_0x411fb6(0x1ea)](_0x411fb6(0x205))[_0x411fb6(0x1a8)]),_0x6bc04c=parseFloat(document[_0x411fb6(0x1ea)](_0x411fb6(0x1ec))['value']),_0x1c4e0e=parseFloat(document['getElementById'](_0x411fb6(0x201))[_0x411fb6(0x1a8)]),_0x5346d1=parseFloat(document['getElementById']('tradeFee')[_0x411fb6(0x1a8)]),_0x25c3a1=JSON['parse'](localStorage['getItem'](_0x411fb6(0x1f8))),_0x5e9efe=[];const _0x9ad9ed=0x8*0x3c*0x3c*0x3e8;for(let _0x22c365=0x0;_0x22c365<_0x25c3a1[_0x411fb6(0x1fe)];_0x22c365++){let _0x34151f=_0x25c3a1[_0x22c365];_0x5e9efe[_0x411fb6(0x1ad)]({'date':new Date(parseFloat(_0x34151f[0x0])+_0x9ad9ed)[_0x411fb6(0x1e8)](),'open':parseFloat(_0x34151f[0x1]),'high':parseFloat(_0x34151f[0x2]),'low':parseFloat(_0x34151f[0x3]),'close':parseFloat(_0x34151f[0x4])});}let _0xbd105e=positionSide===_0x411fb6(0x1c6),_0x4a5ae4=0x0;_0x1c4e0e===0x1?_0x4a5ae4=_0x4cfad6+_0x5c87e2*_0x1c4e0e:_0x4a5ae4=_0x4cfad6+_0x5c87e2*(0x1-Math['pow'](_0x1c4e0e,_0x10645f))/(0x1-_0x1c4e0e);let _0x4cdd37=0x0,_0x292fe9=_0x5e9efe[0x0][_0x411fb6(0x1f3)],_0xe8c0f1=0x0,_0x48f9ff=_0x5e9efe[0x0][_0x411fb6(0x1f3)],_0x1cc2bd=_0xbd105e?_0x292fe9*(0x1-_0x288a8a):_0x292fe9*(0x1+_0x288a8a),_0x5833c0=_0xbd105e?_0x292fe9*(0x1+_0x4ad98f):_0x292fe9*(0x1-_0x4ad98f),_0x45fae3=_0x5e9efe[0x0][_0x411fb6(0x1f3)],_0x221ce7=[];_0x5e9efe['forEach'](_0x23f0d7=>{const _0x30cf88=_0x411fb6;let _0x4796af=(_0xbd105e?_0x23f0d7[_0x30cf88(0x1b9)]-_0x45fae3:_0x45fae3-_0x23f0d7['high'])/_0x45fae3;_0x4a5ae4<Math[_0x30cf88(0x1de)](_0x4cdd37)*(_0xbd105e?_0x292fe9-_0x23f0d7[_0x30cf88(0x1b9)]:_0x23f0d7[_0x30cf88(0x1fa)]-_0x292fe9)&&(_0x4a5ae4=0x0,_0x4cdd37=0x0,_0xe8c0f1=0x0);if(_0xe8c0f1<_0x10645f&&_0x4796af<=-_0x288a8a*Math[_0x30cf88(0x1d5)](_0x6bc04c,_0xe8c0f1)&&(_0xbd105e&&_0x4cdd37>0x0||!_0xbd105e&&_0x4cdd37<0x0)){let _0x4b0e8f=_0x119328*_0x5c87e2*Math[_0x30cf88(0x1d5)](_0x1c4e0e,_0xe8c0f1),_0x59f32c=_0xbd105e?_0x4b0e8f/_0x23f0d7['close']:-_0x4b0e8f/_0x23f0d7['close'];_0x4cdd37+=_0x59f32c,_0x4a5ae4-=_0x4b0e8f*_0x5346d1,_0x292fe9=(_0x292fe9*Math['abs'](_0x4cdd37)+_0x23f0d7['close']*Math[_0x30cf88(0x1de)](_0x59f32c))/Math[_0x30cf88(0x1de)](_0x4cdd37+_0x59f32c),_0xe8c0f1++,_0x45fae3=_0x23f0d7[_0x30cf88(0x1f3)],_0x1cc2bd=_0xbd105e?_0x48f9ff*(0x1-_0x288a8a*Math[_0x30cf88(0x1d5)](_0x6bc04c,_0xe8c0f1)):_0x48f9ff*(0x1+_0x288a8a*Math[_0x30cf88(0x1d5)](_0x6bc04c,_0xe8c0f1)),_0x5833c0=_0xbd105e?_0x292fe9*(0x1+_0x4ad98f):_0x292fe9*(0x1-_0x4ad98f),console[_0x30cf88(0x1e3)](_0x30cf88(0x1c7)+_0x23f0d7[_0x30cf88(0x1c9)]+_0x30cf88(0x1a9)+_0xe8c0f1+'\x20价格:\x20'+_0x23f0d7['close']+'\x20仓位:\x20'+_0x4cdd37+_0x30cf88(0x1a4)+_0x292fe9+'\x20资金:\x20'+_0x4a5ae4);}(_0xbd105e&&_0x4cdd37>0x0&&_0x23f0d7[_0x30cf88(0x1fa)]>=_0x5833c0||!_0xbd105e&&_0x4cdd37<0x0&&_0x23f0d7['low']<=_0x5833c0)&&(_0x4a5ae4+=_0x292fe9*Math['abs'](_0x4cdd37)*_0x4ad98f,_0x4a5ae4-=_0x292fe9*Math[_0x30cf88(0x1de)](_0x4cdd37)*_0x5346d1,_0x4cdd37=0x0,_0x292fe9=_0x23f0d7[_0x30cf88(0x1f3)],_0xe8c0f1=0x0,_0x48f9ff=_0x23f0d7[_0x30cf88(0x1f3)],_0x45fae3=_0x23f0d7['close'],_0x1cc2bd=_0xbd105e?_0x292fe9*(0x1-_0x288a8a):_0x292fe9*(0x1+_0x288a8a),_0x5833c0=_0xbd105e?_0x292fe9*(0x1+_0x4ad98f):_0x292fe9*(0x1-_0x4ad98f),console[_0x30cf88(0x1e3)](_0x30cf88(0x1d4)+_0x23f0d7['date']+_0x30cf88(0x1a9)+_0xe8c0f1+_0x30cf88(0x1a3)+_0x5833c0+_0x30cf88(0x1f7)+_0x4cdd37+_0x30cf88(0x1a4)+_0x292fe9+_0x30cf88(0x1d7)+_0x4a5ae4));if(_0x4cdd37===0x0&&_0x4a5ae4>0.1){let _0x5ecb90=Math[_0x30cf88(0x1ac)](_0x4a5ae4,_0x4cfad6*_0x119328);_0x4cdd37=_0xbd105e?_0x5ecb90/_0x23f0d7[_0x30cf88(0x1f3)]:-_0x5ecb90/_0x23f0d7[_0x30cf88(0x1f3)],_0x4a5ae4-=_0x5ecb90*_0x5346d1,_0x292fe9=_0x23f0d7[_0x30cf88(0x1f3)],_0xe8c0f1=0x0,_0x45fae3=_0x23f0d7[_0x30cf88(0x1f3)],_0x48f9ff=_0x23f0d7[_0x30cf88(0x1f3)],_0x1cc2bd=_0xbd105e?_0x292fe9*(0x1-_0x288a8a):_0x292fe9*(0x1+_0x288a8a),_0x5833c0=_0xbd105e?_0x292fe9*(0x1+_0x4ad98f):_0x292fe9*(0x1-_0x4ad98f),console[_0x30cf88(0x1e3)](_0x30cf88(0x209)+_0x23f0d7[_0x30cf88(0x1c9)]+_0x30cf88(0x1a9)+_0xe8c0f1+_0x30cf88(0x1a3)+_0x23f0d7['close']+_0x30cf88(0x1f7)+_0x4cdd37+'\x20仓位价格:\x20'+_0x292fe9+_0x30cf88(0x1d7)+_0x4a5ae4);}_0x221ce7[_0x30cf88(0x1ad)](_0x4a5ae4);}),document[_0x411fb6(0x1ea)]('computeMartingaleLabel')[_0x411fb6(0x207)]=_0x411fb6(0x1e4)+_0x221ce7[0x0]+'\x20最终金额：'+_0x4a5ae4+_0x411fb6(0x1bb)+(_0x4a5ae4-_0x221ce7[0x0])+_0x411fb6(0x1f9)+(_0x4a5ae4/_0x221ce7[0x0]-0x1)*0x64+'%',renderChart(_0x5e9efe,_0x221ce7),console[_0x411fb6(0x1e3)]('结束执行马丁格尔策略');}function renderChart(_0x29e06f,_0xc62b20){const _0x114204=a0_0xf0a037;let _0x56ff2e=echarts[_0x114204(0x1b3)](document[_0x114204(0x1ea)]('computeMartingaleChart')),_0xa10a4c={'title':{'text':'马丁格尔策略收益曲线'},'tooltip':{'trigger':'axis'},'dataset':{'source':_0x29e06f},'xAxis':{'type':_0x114204(0x1f0),'boundaryGap':![],'axisLine':{'onZero':![]}},'yAxis':[{'type':_0x114204(0x1a8),'scale':!![],'name':'价格','splitLine':{'show':!![]},'axisLine':{'show':!![]}},{'type':_0x114204(0x1a8),'scale':!![],'name':_0x114204(0x19f),'position':_0x114204(0x1cf),'axisLabel':{'show':!![]},'axisLine':{'show':!![]}}],'series':[{'type':'k','itemStyle':{'color0':'#ec0000','color':_0x114204(0x1be),'borderColor0':'#8A0000','borderColor':_0x114204(0x1f5)},'encode':{'x':'date','y':[_0x114204(0x1af),_0x114204(0x1f3),_0x114204(0x1fa),_0x114204(0x1b9)]},'yAxisIndex':0x0},{'type':'line','name':'收益曲线','smooth':!![],'data':_0xc62b20,'yAxisIndex':0x1}]};_0x56ff2e['setOption'](_0xa10a4c);}
