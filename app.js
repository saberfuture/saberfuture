const a0_0x292f8f=a0_0x43a3;(function(_0x365499,_0x37ab76){const _0x87736a=a0_0x43a3,_0x6c9df3=_0x365499();while(!![]){try{const _0x5cc9b6=-parseInt(_0x87736a(0xd5))/0x1+parseInt(_0x87736a(0xe1))/0x2*(parseInt(_0x87736a(0x10d))/0x3)+parseInt(_0x87736a(0xda))/0x4+parseInt(_0x87736a(0xcf))/0x5*(-parseInt(_0x87736a(0x10a))/0x6)+-parseInt(_0x87736a(0x11b))/0x7*(-parseInt(_0x87736a(0xeb))/0x8)+-parseInt(_0x87736a(0xf8))/0x9*(-parseInt(_0x87736a(0x118))/0xa)+-parseInt(_0x87736a(0xf5))/0xb*(parseInt(_0x87736a(0xe5))/0xc);if(_0x5cc9b6===_0x37ab76)break;else _0x6c9df3['push'](_0x6c9df3['shift']());}catch(_0x40ce16){_0x6c9df3['push'](_0x6c9df3['shift']());}}}(a0_0x9fee,0x3c868));let apiUrl=a0_0x292f8f(0xff),queryBtn=document[a0_0x292f8f(0xce)](a0_0x292f8f(0xbc)),downloadKlineBtn=document[a0_0x292f8f(0xce)](a0_0x292f8f(0xf2)),closeKlineBtn=document[a0_0x292f8f(0xce)]('closeKlineBtn'),symbolSelect=document[a0_0x292f8f(0xce)]('symbolSelect'),intervalSelect=document[a0_0x292f8f(0xce)]('intervalSelect'),startTimeInput=document['getElementById'](a0_0x292f8f(0xd1)),endTimeInput=document[a0_0x292f8f(0xce)](a0_0x292f8f(0xf0)),klineDialog=document[a0_0x292f8f(0xce)](a0_0x292f8f(0x109)),klineTable=document['getElementById']('klineTable'),positionSideSelect=document[a0_0x292f8f(0xce)](a0_0x292f8f(0xbe)),computeBtn=document[a0_0x292f8f(0xce)](a0_0x292f8f(0x108)),closeMartingaleBtn=document[a0_0x292f8f(0xce)]('closeMartingaleBtn'),computeMartingaleDialog=document[a0_0x292f8f(0xce)](a0_0x292f8f(0x11d)),symbol=symbolSelect[a0_0x292f8f(0xfe)],interval=intervalSelect['value'],startTime=new Date(startTimeInput[a0_0x292f8f(0xfe)])[a0_0x292f8f(0xe9)](),endTime=new Date(endTimeInput['value'])[a0_0x292f8f(0xe9)](),positionSide=positionSideSelect[a0_0x292f8f(0xfe)],klineData=[],currentStartTime=startTime,totalResults=0x0;intervalSelect[a0_0x292f8f(0xe4)]=function(){interval=intervalSelect['value'];},startTimeInput[a0_0x292f8f(0xe4)]=function(){startTime=new Date(startTimeInput['value'])['getTime']();},endTimeInput[a0_0x292f8f(0xe4)]=function(){const _0x482bb7=a0_0x292f8f;endTime=new Date(endTimeInput[_0x482bb7(0xfe)])['getTime']();},positionSideSelect['onchange']=function(){const _0x2b32a8=a0_0x292f8f;positionSide=positionSideSelect[_0x2b32a8(0xfe)];},queryBtn['onclick']=function(){const _0x2b1452=a0_0x292f8f;queryBtn[_0x2b1452(0x117)]=!![],queryBtn[_0x2b1452(0x100)]['backgroundColor']=_0x2b1452(0xe2),query();},computeBtn[a0_0x292f8f(0xf9)]=function(){compute();};function query(){const _0x3179d0=a0_0x292f8f;klineData=[],currentStartTime=startTime,totalResults=0x0,klineTable[_0x3179d0(0xc4)]='',queryWithLimit(currentStartTime);}function a0_0x43a3(_0x68397c,_0x283308){const _0x9fee53=a0_0x9fee();return a0_0x43a3=function(_0x43a346,_0x449505){_0x43a346=_0x43a346-0xb5;let _0x4b989b=_0x9fee53[_0x43a346];return _0x4b989b;},a0_0x43a3(_0x68397c,_0x283308);}function queryWithLimit(_0xac8971){const _0x2fe570=a0_0x292f8f;let _0x5b613a='?symbol='+symbol+'USDT'+_0x2fe570(0xcd)+interval+_0x2fe570(0xc5)+_0xac8971+_0x2fe570(0xc9)+endTime+'&limit=1000';fetch(apiUrl+_0x5b613a)['then'](function(_0x15b872){return _0x15b872['json']();})[_0x2fe570(0x116)](function(_0x167096){const _0xd11fd7=_0x2fe570;totalResults+=_0x167096['length'],currentStartTime=_0x167096[_0x167096[_0xd11fd7(0xed)]-0x1][0x0]+0x1,klineData=klineData[_0xd11fd7(0x10b)](_0x167096),localStorage['setItem'](_0xd11fd7(0xb8),JSON[_0xd11fd7(0xbd)](klineData));if(_0x167096[_0xd11fd7(0xed)]<0x3e8){showKlineTable(0x1),klineDialog[_0xd11fd7(0x100)]['display']=_0xd11fd7(0xf1);return;}new Promise(_0x34deb2=>{setTimeout(_0x34deb2,0x3e8);})[_0xd11fd7(0x116)](()=>{queryWithLimit(currentStartTime);});});}function a0_0x9fee(){const _0x5d761f=['\x20收益率：','right','leverage','.json','computeBtn','klineDialog','616332JRsBeH','concat','\x20最终金额：','113781ReIRGq','\x20仓位价格:\x20','stopProfit','none','收益曲线','download','总资金','close','removeChild','then','disabled','3130jclqwl','triggerDrop','#8A0000','2825431OXhIUU','display','computeMartingaleDialog','line','#ec0000','abs','tradeFee','innerText','#008F28','push','addEventListener','</td><td>','klineData','classList','computeMartingaleChart','#00da3c','queryBtn','stringify','positionSideSelect','\x20加仓次数:\x20','computeMartingaleLabel','appendChild','open','body','innerHTML','&startTime=','low','forEach','tbody','&endTime=','map','firstAmount','ceil','&interval=','getElementById','5OOYCVa','long','startTime','axis','high','\x20资金:\x20','379300rRNTLq','createElement','date','additionMultiplier','click','706044eewqzd','data:application/json;charset=utf-8,','href','thead','priceMultiplier','setOption','getItem','14nAQBlX','gray','init','onchange','4284GOGEbX','\x20仓位:\x20','div','\x20价格:\x20','getTime','</td>','8PujIhq','log','length','category','<tr><th>Time</th><th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th><th>Close\x20Time</th><th>Quote\x20Asset\x20Volume</th><th>Number\x20of\x20Trades</th><th>Taker\x20Buy\x20Base\x20Asset\x20Volume</th><th>Taker\x20Buy\x20Quote\x20Asset\x20Volume</th><th>Ignore</th></tr>','endTime','block','downloadKlineBtn','开仓\x20时间:\x20','maxAdditionCount','9284EFRyFl','\x20收益：','结束执行马丁格尔策略','5337BgAUwc','onclick','toLocaleString','className','parse','加仓\x20时间:\x20','value','https://api.binance.com/api/v3/klines','style','pow','add','baseAmount'];a0_0x9fee=function(){return _0x5d761f;};return a0_0x9fee();}function showKlineTable(_0x1a6a05){const _0x4cc4b5=a0_0x292f8f;klineTable[_0x4cc4b5(0xc4)]='';let _0x3c0bdc=0xa,_0x110af5=(_0x1a6a05-0x1)*_0x3c0bdc,_0x26c7dd=_0x110af5+_0x3c0bdc,_0x470c06=klineData['slice'](_0x110af5,_0x26c7dd),_0x3dcfcc=document[_0x4cc4b5(0xd6)](_0x4cc4b5(0xdd));_0x3dcfcc[_0x4cc4b5(0xc4)]=_0x4cc4b5(0xef),klineTable['appendChild'](_0x3dcfcc);let _0x4d5755=document[_0x4cc4b5(0xd6)](_0x4cc4b5(0xc8));console[_0x4cc4b5(0xec)](_0x470c06),_0x470c06[_0x4cc4b5(0xc7)](function(_0x57d786){const _0x608f49=_0x4cc4b5;let _0xbea39=document['createElement']('tr');_0xbea39[_0x608f49(0xc4)]='<td>'+new Date(_0x57d786[0x0])[_0x608f49(0xfa)]()+_0x608f49(0xb7)+_0x57d786[0x1]+_0x608f49(0xb7)+_0x57d786[0x2]+_0x608f49(0xb7)+_0x57d786[0x3]+_0x608f49(0xb7)+_0x57d786[0x4]+_0x608f49(0xb7)+_0x57d786[0x5]+_0x608f49(0xb7)+new Date(_0x57d786[0x6])[_0x608f49(0xfa)]()+'</td><td>'+_0x57d786[0x7]+'</td><td>'+_0x57d786[0x8]+'</td><td>'+_0x57d786[0x9]+'</td><td>'+_0x57d786[0xa]+_0x608f49(0xb7)+_0x57d786[0xb]+_0x608f49(0xea),_0x4d5755[_0x608f49(0xc1)](_0xbea39);}),klineTable[_0x4cc4b5(0xc1)](_0x4d5755);let _0x4c8f51=document[_0x4cc4b5(0xd6)](_0x4cc4b5(0xe7));_0x4c8f51[_0x4cc4b5(0xfb)]='page-links';let _0x265035=Math[_0x4cc4b5(0xcc)](klineData[_0x4cc4b5(0xed)]/_0x3c0bdc);for(let _0x37ea91=0x1;_0x37ea91<=_0x265035;_0x37ea91++){let _0x2de1cf=document['createElement']('a');_0x2de1cf[_0x4cc4b5(0xdc)]='#',_0x2de1cf[_0x4cc4b5(0xfb)]='page-link',_0x2de1cf[_0x4cc4b5(0x122)]=_0x37ea91+'',_0x2de1cf[_0x4cc4b5(0xb6)]('click',()=>showKlineTable(_0x37ea91)),_0x37ea91===_0x1a6a05&&_0x2de1cf[_0x4cc4b5(0xb9)][_0x4cc4b5(0x102)]('current'),_0x4c8f51['appendChild'](_0x2de1cf);}klineTable[_0x4cc4b5(0xc1)](_0x4c8f51);}closeKlineBtn[a0_0x292f8f(0xf9)]=function(){const _0x21bb9a=a0_0x292f8f;klineDialog[_0x21bb9a(0x100)][_0x21bb9a(0x11c)]=_0x21bb9a(0x110);},closeMartingaleBtn[a0_0x292f8f(0xf9)]=function(){const _0x14d163=a0_0x292f8f;computeMartingaleDialog[_0x14d163(0x100)][_0x14d163(0x11c)]=_0x14d163(0x110);},downloadKlineBtn[a0_0x292f8f(0xf9)]=function(){const _0x5e6f80=a0_0x292f8f;let _0x94cf2c=symbol+'_'+interval+_0x5e6f80(0x107),_0x1baf8c=klineData[_0x5e6f80(0xca)](function(_0x531404){return{'timestamp':_0x531404[0x0],'open':_0x531404[0x1],'high':_0x531404[0x2],'low':_0x531404[0x3],'close':_0x531404[0x4],'volume':_0x531404[0x5],'closeTime':_0x531404[0x6],'quoteAssetVolume':_0x531404[0x7],'numberOfTrades':_0x531404[0x8],'takerBuyBaseAssetVolume':_0x531404[0x9],'takerBuyQuoteAssetVolume':_0x531404[0xa],'ignore':_0x531404[0xb]};}),_0x32d829=document[_0x5e6f80(0xd6)]('a');_0x32d829[_0x5e6f80(0x112)]=_0x94cf2c,_0x32d829[_0x5e6f80(0xdc)]=_0x5e6f80(0xdb)+encodeURIComponent(JSON[_0x5e6f80(0xbd)](_0x1baf8c,null,0x2)),_0x32d829[_0x5e6f80(0x100)][_0x5e6f80(0x11c)]='none',document['body'][_0x5e6f80(0xc1)](_0x32d829),_0x32d829[_0x5e6f80(0xd9)](),document[_0x5e6f80(0xc3)][_0x5e6f80(0x115)](_0x32d829);};function compute(){const _0x479a01=a0_0x292f8f;console[_0x479a01(0xec)]('开始执行马丁格尔策略');let _0x4a2e2c=document[_0x479a01(0xce)](_0x479a01(0x11d));_0x4a2e2c[_0x479a01(0x100)][_0x479a01(0x11c)]=_0x479a01(0xf1);let _0x1be320=parseFloat(document[_0x479a01(0xce)](_0x479a01(0x106))[_0x479a01(0xfe)]),_0x52dfbf=parseFloat(document[_0x479a01(0xce)](_0x479a01(0xcb))[_0x479a01(0xfe)]),_0x12d8e1=parseFloat(document['getElementById'](_0x479a01(0x103))[_0x479a01(0xfe)]),_0x4a9c25=parseFloat(document[_0x479a01(0xce)](_0x479a01(0x119))['value']),_0x54f162=parseFloat(document[_0x479a01(0xce)](_0x479a01(0x10f))[_0x479a01(0xfe)]),_0x59eeb0=parseInt(document[_0x479a01(0xce)](_0x479a01(0xf4))[_0x479a01(0xfe)]),_0x99af7e=parseFloat(document[_0x479a01(0xce)](_0x479a01(0xde))[_0x479a01(0xfe)]),_0x710d14=parseFloat(document[_0x479a01(0xce)](_0x479a01(0xd8))[_0x479a01(0xfe)]),_0x215c67=parseFloat(document[_0x479a01(0xce)](_0x479a01(0x121))[_0x479a01(0xfe)]),_0x2effd8=JSON[_0x479a01(0xfc)](localStorage[_0x479a01(0xe0)]('klineData')),_0x1463bb=[];const _0x312b13=0x8*0x3c*0x3c*0x3e8;for(let _0x49fc3b=0x0;_0x49fc3b<_0x2effd8['length'];_0x49fc3b++){let _0x51f9e6=_0x2effd8[_0x49fc3b];_0x1463bb['push']({'date':new Date(parseFloat(_0x51f9e6[0x0])+_0x312b13)['toISOString'](),'open':parseFloat(_0x51f9e6[0x1]),'high':parseFloat(_0x51f9e6[0x2]),'low':parseFloat(_0x51f9e6[0x3]),'close':parseFloat(_0x51f9e6[0x4])});}let _0x3ec58c=positionSide===_0x479a01(0xd0),_0x2050ae=0x0;_0x710d14===0x1?_0x2050ae=_0x52dfbf+_0x12d8e1*_0x710d14:_0x2050ae=_0x52dfbf+_0x12d8e1*(0x1-Math[_0x479a01(0x101)](_0x710d14,_0x59eeb0))/(0x1-_0x710d14);let _0x45cd5f=0x0,_0x437a97=_0x1463bb[0x0][_0x479a01(0x114)],_0xe95662=0x0,_0x7f64f7=_0x1463bb[0x0][_0x479a01(0x114)],_0x312b3a=_0x3ec58c?_0x437a97*(0x1-_0x4a9c25):_0x437a97*(0x1+_0x4a9c25),_0x42964d=_0x3ec58c?_0x437a97*(0x1+_0x54f162):_0x437a97*(0x1-_0x54f162),_0x7031e9=_0x1463bb[0x0][_0x479a01(0x114)],_0x5efc08=[];_0x1463bb[_0x479a01(0xc7)](_0x4b1b66=>{const _0x5ea9a7=_0x479a01;let _0x5a735c=(_0x3ec58c?_0x4b1b66['low']-_0x7031e9:_0x7031e9-_0x4b1b66[_0x5ea9a7(0xd3)])/_0x7031e9;_0x2050ae<Math[_0x5ea9a7(0x120)](_0x45cd5f)*(_0x3ec58c?_0x437a97-_0x4b1b66['low']:_0x4b1b66[_0x5ea9a7(0xd3)]-_0x437a97)&&(_0x2050ae=0x0,_0x45cd5f=0x0,_0xe95662=0x0);if(_0xe95662<_0x59eeb0&&_0x5a735c<=-_0x4a9c25*Math['pow'](_0x99af7e,_0xe95662)&&(_0x3ec58c&&_0x45cd5f>0x0||!_0x3ec58c&&_0x45cd5f<0x0)){let _0x2a41ea=_0x1be320*_0x12d8e1*Math[_0x5ea9a7(0x101)](_0x710d14,_0xe95662),_0x367cc1=_0x3ec58c?_0x2a41ea/_0x4b1b66[_0x5ea9a7(0x114)]:-_0x2a41ea/_0x4b1b66[_0x5ea9a7(0x114)];_0x45cd5f+=_0x367cc1,_0x2050ae-=_0x2a41ea*_0x215c67,_0x437a97=(_0x437a97*Math[_0x5ea9a7(0x120)](_0x45cd5f)+_0x4b1b66[_0x5ea9a7(0x114)]*Math[_0x5ea9a7(0x120)](_0x367cc1))/Math[_0x5ea9a7(0x120)](_0x45cd5f+_0x367cc1),_0xe95662++,_0x7031e9=_0x4b1b66[_0x5ea9a7(0x114)],_0x312b3a=_0x3ec58c?_0x7f64f7*(0x1-_0x4a9c25*Math[_0x5ea9a7(0x101)](_0x99af7e,_0xe95662)):_0x7f64f7*(0x1+_0x4a9c25*Math[_0x5ea9a7(0x101)](_0x99af7e,_0xe95662)),_0x42964d=_0x3ec58c?_0x437a97*(0x1+_0x54f162):_0x437a97*(0x1-_0x54f162),console[_0x5ea9a7(0xec)](_0x5ea9a7(0xfd)+_0x4b1b66['date']+_0x5ea9a7(0xbf)+_0xe95662+_0x5ea9a7(0xe8)+_0x4b1b66[_0x5ea9a7(0x114)]+_0x5ea9a7(0xe6)+_0x45cd5f+_0x5ea9a7(0x10e)+_0x437a97+_0x5ea9a7(0xd4)+_0x2050ae);}(_0x3ec58c&&_0x45cd5f>0x0&&_0x4b1b66['high']>=_0x42964d||!_0x3ec58c&&_0x45cd5f<0x0&&_0x4b1b66[_0x5ea9a7(0xc6)]<=_0x42964d)&&(_0x2050ae+=_0x437a97*Math[_0x5ea9a7(0x120)](_0x45cd5f)*_0x54f162,_0x2050ae-=_0x437a97*Math[_0x5ea9a7(0x120)](_0x45cd5f)*_0x215c67,_0x45cd5f=0x0,_0x437a97=_0x4b1b66[_0x5ea9a7(0x114)],_0xe95662=0x0,_0x7f64f7=_0x4b1b66[_0x5ea9a7(0x114)],_0x7031e9=_0x4b1b66[_0x5ea9a7(0x114)],_0x312b3a=_0x3ec58c?_0x437a97*(0x1-_0x4a9c25):_0x437a97*(0x1+_0x4a9c25),_0x42964d=_0x3ec58c?_0x437a97*(0x1+_0x54f162):_0x437a97*(0x1-_0x54f162),console[_0x5ea9a7(0xec)]('平仓\x20时间:\x20'+_0x4b1b66[_0x5ea9a7(0xd7)]+_0x5ea9a7(0xbf)+_0xe95662+_0x5ea9a7(0xe8)+_0x42964d+_0x5ea9a7(0xe6)+_0x45cd5f+_0x5ea9a7(0x10e)+_0x437a97+_0x5ea9a7(0xd4)+_0x2050ae));if(_0x45cd5f===0x0&&_0x2050ae>0.1){let _0x77a911=Math['min'](_0x2050ae,_0x52dfbf*_0x1be320);_0x45cd5f=_0x3ec58c?_0x77a911/_0x4b1b66[_0x5ea9a7(0x114)]:-_0x77a911/_0x4b1b66[_0x5ea9a7(0x114)],_0x2050ae-=_0x77a911*_0x215c67,_0x437a97=_0x4b1b66['close'],_0xe95662=0x0,_0x7031e9=_0x4b1b66['close'],_0x7f64f7=_0x4b1b66[_0x5ea9a7(0x114)],_0x312b3a=_0x3ec58c?_0x437a97*(0x1-_0x4a9c25):_0x437a97*(0x1+_0x4a9c25),_0x42964d=_0x3ec58c?_0x437a97*(0x1+_0x54f162):_0x437a97*(0x1-_0x54f162),console['log'](_0x5ea9a7(0xf3)+_0x4b1b66[_0x5ea9a7(0xd7)]+_0x5ea9a7(0xbf)+_0xe95662+_0x5ea9a7(0xe8)+_0x4b1b66[_0x5ea9a7(0x114)]+_0x5ea9a7(0xe6)+_0x45cd5f+_0x5ea9a7(0x10e)+_0x437a97+_0x5ea9a7(0xd4)+_0x2050ae);}_0x5efc08[_0x5ea9a7(0xb5)](_0x2050ae);}),document['getElementById'](_0x479a01(0xc0))[_0x479a01(0x122)]='\x20总计投入保证金：'+_0x5efc08[0x0]+_0x479a01(0x10c)+_0x2050ae+_0x479a01(0xf6)+(_0x2050ae-_0x5efc08[0x0])+_0x479a01(0x104)+(_0x2050ae/_0x5efc08[0x0]-0x1)*0x64+'%',renderChart(_0x1463bb,_0x5efc08),console[_0x479a01(0xec)](_0x479a01(0xf7));}function renderChart(_0x34ff81,_0x2a6e03){const _0x8882=a0_0x292f8f;let _0x52c539=echarts[_0x8882(0xe3)](document['getElementById'](_0x8882(0xba))),_0x419938={'title':{'text':'马丁格尔策略收益曲线'},'tooltip':{'trigger':_0x8882(0xd2)},'dataset':{'source':_0x34ff81},'xAxis':{'type':_0x8882(0xee),'boundaryGap':![],'axisLine':{'onZero':![]}},'yAxis':[{'type':_0x8882(0xfe),'scale':!![],'name':'价格','splitLine':{'show':!![]},'axisLine':{'show':!![]}},{'type':_0x8882(0xfe),'scale':!![],'name':_0x8882(0x113),'position':_0x8882(0x105),'axisLabel':{'show':!![]},'axisLine':{'show':!![]}}],'series':[{'type':'k','itemStyle':{'color0':_0x8882(0x11f),'color':_0x8882(0xbb),'borderColor0':_0x8882(0x11a),'borderColor':_0x8882(0x123)},'encode':{'x':_0x8882(0xd7),'y':[_0x8882(0xc2),_0x8882(0x114),_0x8882(0xd3),_0x8882(0xc6)]},'yAxisIndex':0x0},{'type':_0x8882(0x11e),'name':_0x8882(0x111),'smooth':!![],'data':_0x2a6e03,'yAxisIndex':0x1}]};_0x52c539[_0x8882(0xdf)](_0x419938);}
